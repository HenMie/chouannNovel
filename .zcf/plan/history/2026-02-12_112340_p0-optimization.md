# P0问题优化执行计划

## 背景

- 来源：`PRODUCT_ANALYSIS.md` 中 P0 问题
- 目标：修复 3 项 P0，新增并发失败自动重试（用户可配置，默认 3 次）
- 策略：严格失败（任一并发任务重试耗尽后，工作流整体失败）

## 执行步骤

1. 扩展并发配置类型
   - 文件：`src/types/index.ts`
   - 内容：为 `ParallelStartConfig` 增加 `retry_count`

2. 前端并发配置 UI 改造
   - 文件：`src/components/node/configs/ParallelConfig.tsx`
   - 内容：新增重试次数配置，默认 3 次

3. 执行引擎并发重试与严格失败
   - 文件：`src/lib/engine/executor.ts`
   - 内容：并发节点执行增加重试逻辑；重试耗尽后抛错

4. 暂停人工修改输出同步修复
   - 文件：`src/lib/engine/executor.ts`
   - 内容：`modifyNodeOutput` 同步变量映射，保证后续节点读取新值

5. 导入设定层级修复
   - 文件：`src/lib/db/index.ts`
   - 内容：`importSettings` / `importProject` 写入并映射 `parent_id` 与 `order_index`

6. 测试补全与验证
   - 文件：`src/lib/engine/__tests__/executor.test.ts`
   - 文件：`src/lib/db/__tests__/index.test.ts`
   - 内容：补充重试、严格失败、层级导入保留测试

